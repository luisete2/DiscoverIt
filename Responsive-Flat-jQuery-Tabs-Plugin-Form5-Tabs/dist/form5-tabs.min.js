/*!
  form5-tabs v2.0.1
  Written by Form5
  http://www.form5.is
  hello@form5.is
  License: MIT
*/
(function(){"use strict";var a="tabs",b={heading:">.heading",responsive:!0,start:0,toggle:function(){},init:function(){},debug:!1};$[a]=function(c,d){this.element=c,this.$element=$(c),this.options=$.extend({},b,d),this.debug=this.options.debug,this._defaults=b,this._name=a,$.when($.proxy(this.initialize(),this)).done("function"==typeof this.options.init&&this.options.init())},$[a].prototype={initialize:function(){this.debug&&console.log("initialize()",this),this.$tabs=this.$element.find(">tab"),this.tabs=this.processTabs(),this.$nav=this.createNav(),this.activateTab(this.options.start),this.$element.attr("alive",!0),this.options.responsive&&$(window).resize($.proxy(this.onResize,this)).resize()},processTabs:function(){var a={};return this.count=0,$.each(this.$tabs,$.proxy(function(b,c){var d=$(c);d.data("heading",d.find(this.options.heading)),d.data("index",b),a[b]={el:d,title:d.data("heading").text(),cssClass:"undefined"!=typeof d.data("heading").attr("class")?d.data("heading").attr("class"):""},d.data("heading").remove(),this.count++},this)),a},createNav:function(){var a=$("<nav></nav>");return $.each(this.tabs,$.proxy(function(b,c){a.append($("<tab />").data("index",b).addClass(c.cssClass).append($("<span />").text(c.title).addClass(c.cssClass)).on("click",$.proxy(function(){this.activateTab(b)},this)))},this)),this.$element.prepend(a),this.options.responsive&&(this.navWidth=0,$.each(a.find("tab"),$.proxy(function(a,b){this.navWidth+=$(b).outerWidth()},this)),this.navWidth+=40),a},activateTab:function(a){var b="undefined"!=typeof a&&""!==a?parseInt(a,10):0;b=b>this.count-1?this.count-1:b,b=0>b?0:b,this.debug&&console.log("tab nr {"+a+"} should be activated"),$.each(this.$nav.find(">tab"),function(a){a===b&&$(this).attr("active",!0).siblings("tab").attr("active",!1)}),$.each(this.$tabs,function(a){a===b&&$(this).attr("active",!0).siblings("tab").attr("active",!1)}),"function"==typeof this.options.toggle&&this.options.toggle(this.$tabs[b])},onResize:function(){clearTimeout(this.timeout),this.timeout=setTimeout($.proxy(function(){this.$element.attr("break",this.navWidth>=$(window).width())},this),200)},destroy:function(){this.debug&&console.log("destroying tabs",this),$.each(this.$tabs,$.proxy(function(a,b){var c=$(b),d=c.data("heading");c.prepend(d)},this)),this.$nav.remove(),this.$element.attr("alive",!1)}},$.fn[a]=function(b){return this.each(function(){if($(this).data("form5-"+a)){var c=$(this).data("form5-"+a);switch(b){case"destroy":c.destroy(),$(this).removeData(a);break;default:"number"==typeof b&&c.activateTab(b)}}else{if("destroy"===b)return;$(this).data("form5-"+a,new $[a](this,b))}})}}).call(this);